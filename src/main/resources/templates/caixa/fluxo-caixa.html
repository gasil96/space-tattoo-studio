<!DOCTYPE html>
<html layout:decorate="~{layout-principal}">
<head>
<meta charset="UTF-8" />
<body>
	<h2 layout:fragment="titulosubCabecalho">Controle Caixa Diário</h2>

	<li layout:fragment="caminho">Caixa</li>

	<div layout:fragment="corpo">

		<section class="no-padding-bottom">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-8">
                <div class="stats-2-block block d-flex">
                  <div class="stats-2 d-flex">
                    <div class="stats-2-arrow height"><i class="fa fa-caret-up"></i></div>
                 	<div class="stats-2-content"><strong class="d-block">R$ <strong>3145.00</strong></strong><span class="d-block">Saldo Atual</span>
                      <div class="progress progress-template progress-small">
                        <div role="progressbar" style="width: 60%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-template progress-bar-small dashbg-2"></div>
                      </div>
                    </div>
                  </div>
                  <div class="stats-2 d-flex">
                    <div class="stats-2-arrow height"><i class="fa fa-caret-up"></i></div>
                      <div class="stats-2-content"><strong class="d-block">R$ <strong>3145.00</strong></strong><span class="d-block">Entrada</span>
                      <div class="progress progress-template progress-small">
                        <div role="progressbar" style="width: 35%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-template progress-bar-small dashbg-3"></div>
                      </div>
                    </div>
                  </div>
                  <div class="stats-2 d-flex">
                    <div class="stats-2-arrow low"><i class="fa fa-caret-down"></i></div>
                    <div class="stats-2-content"><strong class="d-block">R$ <strong>3145.00</strong></strong><span class="d-block">Saída</span>
                      <div class="progress progress-template progress-small">
                        <div role="progressbar" style="width: 35%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-template progress-bar-small dashbg-3"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section>
	        <div class="col-lg-8">                           
                <div class="block">
                  <div class="block-body">
                    <form class="form-inline">
                      <div class="form-group">
                        <label for="inlineFormInput" class="sr-only">Valor Inicial Caixa</label>
						 <input type="text" value="0" name="valorInicialCaixa" class="form-control">
                      </div>
                      <div class="form-group">
                        <label for="inlineFormInputGroup" class="sr-only">Descrição</label>
                        <input id="inlineFormInputGroup" type="text" placeholder="Descrição" class="mr-sm-3 form-control form-control" style="margin-left: 20px;">
                      </div>
                      <div class="form-group">
                        <input type="submit" value="ABRIR CAIXA" class="btn btn-primary" id="abrir-caixa">
                        <input type="submit" value="FECHAR CAIXA" class="btn btn-danger" id="fechar-caixa" style="display: none;">
                        
                      </div>
                    </form>
                  </div>
                </div>
              </div>
        </section>
        
        <section id = "fluxo" style="display: block;">
	        <div class="col-lg-8">
	                <div class="block">
	                  <div class="title" align="center"><strong>CAIXA ABERTO</strong> <i class="material-icons" style="color: green"> monetization_on </i></div>
	                  <div class="block-body">
	                    <form th:action="@{/caixa/salvar}" th:object="${entradaSaida}" method="POST">
	                      <div class="form-group">
	                          <div class="i-checks" align="center">
	                            <input th:each="to : ${tipooperacao}" th:value=${to} name="radios" class="radio-template" required="required"  type="radio" th:text="${to.operacao}" style="margin: 6px">
	                          </div>
	                        </div>
	                        <div class="form-group" id="tipoEntrada">
							<label for="categoriaEntrada">Tipo de Entrada</label> 
							<select id="categoriaEntrada" class="form-control" required="required" th:field="*{categoriaEntrada}">
								<option value="" selected="selected">Selecione...</option>
								<option th:each="cat : ${categoriaentrada}" th:value="${cat}" th:text="${cat.categoriaEntrada}">ATIVO</option>
							</select>
							</div>
	                        <div class="form-group">
							<label>Descrição</label> 
							<input type="text" id="descricao" placeholder="Informações sobre..." class="form-control" required="required" th:field="*{descricao}">
						</div>
						<div class="form-group">
                        	<label>Valor R$</label>
						 	<input type="text" value="0" name="valorEntradaSaida" class="form-control" >
                      	</div>
                      	<div class="form-group" id="desconto">
                        	<label>Desconto % <span style="font-size: 11px; vertical-align: top; color: white">( Opcional )</span></label>
						 	<input type="text" value="0" class="form-control" name="valorDesconto" th:field="*{desconto}">
                      	</div>
                      	<div class="form-group" id="formaPagamento">
							<label for="formaPagamento">Forma de pagamento</label> 
							<select id="formaPagamento" class="form-control" required="required" th:field="*{formaPagamento}">
								<option value="" selected="selected">Selecione...</option>
								<option th:each="fp : ${formapagamento}" th:value="${fp}" th:text="${fp.pagamento}">ATIVO</option>
							</select>
						</div>
						<div align="right">
							<button type="reset" class="btn btn-warning">Limpar</button>
							<button type="submit" class="btn btn-primary">Adicionar</button>
						</div>
	                    </form>
	                  </div>
	                </div>
	              </div>
        </section>
        

	</div>
	<script type="text/javascript" layout:fragment="script">
 
//  TODO - PROVISORIO INICIALIZAR --> "STYLE DISPLAY NONE" BUTTON FECHAR CAIXA E FORM  @@@@@@@@@@@@@2
  

		 $(document).ready(function() {
			  $('input:radio[name="radios"]').change(function() {
			    if ($("input[name='radios']:checked")) {
			      controleFormulario($(this).val());
			    } else {
			      console.log("caiu no else")
			    }
			  });
			});
			
			function controleFormulario(e) {
			  if(e == 'ENTRADA') {
				$("#tipoEntrada").show();
				$("#formaPagamento").show();
				$("#desconto").show();
			  }else if (e == 'SAIDA'){
				$("#tipoEntrada").hide();
				$("#formaPagamento").hide();
				$("#desconto	").hide();
			  }else{
				  alert("nada");
			  }
			}
			
	 $("input[name='valorInicialCaixa']").TouchSpin({
	     min: 0,
	     max:10000000000,
	     step: 10.0,
	     decimals: 2,
	     boostat: 5,
	     maxboostedstep: 10,
	     prefix:'R$',
	 });
 
	 $("input[name='valorEntradaSaida']").TouchSpin({
	     min: 0,
	     max:1000000000000000000000000000,
	     step: 10.0,
	     decimals: 2,
	     boostat: 5,
	     maxboostedstep: 10,
	     prefix:'R$',
	 });
	 $("input[name='valorDesconto']").TouchSpin({
	     min: 0,
	     max:100,
	     step: 5,
	     boostat: 5,
	     maxboostedstep: 10,
	     prefix:'%',
	 });
	$("#abrir-caixa").click(function() {
		$("#fechar-caixa").show();
		$("#abrir-caixa").hide();
		$("#fluxo").show();
	});	
	
	$("#fechar-caixa").click(function() {
		$("#fechar-caixa").hide();
		$("#abrir-caixa").show();
		$("#fluxo").hide();
	});	
	</script>
</body>
</html>